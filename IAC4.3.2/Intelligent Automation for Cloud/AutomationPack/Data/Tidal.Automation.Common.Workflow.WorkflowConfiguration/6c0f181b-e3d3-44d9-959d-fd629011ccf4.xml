<?xml version="1.0"?>
<WorkflowConfiguration xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xml:space="preserve">
  <Id>6c0f181b-e3d3-44d9-959d-fd629011ccf4</Id>
  <DisplayName>Generate RabbitMQ vHost</DisplayName>
  <CreatedTime>2016-02-15T20:45:52.8015Z</CreatedTime>
  <ModifiedTime>2016-02-15T20:46:11.0107421Z</ModifiedTime>
  <FirstActivity xsi:type="RootNode">
    <Id>5d5c9a95-61a3-4001-acf4-ca646b094928</Id>
    <DisplayName />
    <Children>
      <ActivityNode xsi:type="ExecuteActivityNode">
        <Id>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</Id>
        <DisplayName>Open Terminal Session</DisplayName>
        <Children>
          <ActivityNode xsi:type="FailedBranchPlaceholderNode">
            <Id>5533d966-d2e4-429d-8743-07feff71d9e6</Id>
            <ActivityNodeId>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</ActivityNodeId>
            <CompletedId>0a8550fe-c3f6-45fe-bfed-d27b1180ee77</CompletedId>
          </ActivityNode>
        </Children>
        <Configuration xsi:type="SSHOpenSessionActivityConfiguration" xml:space="preserve">
          <Id>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</Id>
          <DisplayName>Open Terminal Session</DisplayName>
          <TargetLoadBalancer xsi:type="ProcessTargetLoadBalancer" />
          <ContainingProcessId>922e928f-e50f-4d4b-88d8-8b71cc891f0e</ContainingProcessId>
          <TimeOutPeriod>
            <DisplayUnits>Minutes</DisplayUnits>
            <Period>
              <HardcodedValue>2</HardcodedValue>
            </Period>
          </TimeOutPeriod>
          <AHFDelay>
            <DisplayUnits>Seconds</DisplayUnits>
            <Period>
              <HardcodedValue>12</HardcodedValue>
            </Period>
          </AHFDelay>
          <ExpectList>
            <ExpectElementConfiguration>
              <Name>Error</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetErrorExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Failed_Incompleted</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
            <ExpectElementConfiguration>
              <Name>Prompt</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetPromptExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Succeeded</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
            <ExpectElementConfiguration>
              <Name>Admin Prompt</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetAdminPromptExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Succeeded</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
          </ExpectList>
          <CommandTimeoutPeriod>
            <DisplayUnits>Minutes</DisplayUnits>
            <Period>
              <HardcodedValue>1</HardcodedValue>
            </Period>
          </CommandTimeoutPeriod>
          <PreserveOutput>true</PreserveOutput>
          <WaitingTimeoutPeriod>
            <DisplayUnits>Minutes</DisplayUnits>
            <Period>
              <HardcodedValue>60</HardcodedValue>
            </Period>
          </WaitingTimeoutPeriod>
        </Configuration>
      </ActivityNode>
      <ActivityNode xsi:type="ExecuteActivityNode">
        <Id>ab1a503f-ff7b-4f5e-b6df-21ccac53016f</Id>
        <DisplayName>Execute Terminal Command</DisplayName>
        <Children>
          <ActivityNode xsi:type="FailedBranchPlaceholderNode">
            <Id>7fcf8312-8446-4d27-a911-968004acda0a</Id>
            <ActivityNodeId>ab1a503f-ff7b-4f5e-b6df-21ccac53016f</ActivityNodeId>
            <CompletedId>65b4e293-036d-48ca-a22a-22bc0742c454</CompletedId>
          </ActivityNode>
        </Children>
        <Configuration xsi:type="SSHSendActivityConfiguration" xml:space="preserve">
          <Id>ab1a503f-ff7b-4f5e-b6df-21ccac53016f</Id>
          <DisplayName>Execute Terminal Command</DisplayName>
          <TargetLoadBalancer xsi:type="ActivityTargetLoadBalancer">
            <ActivityId>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</ActivityId>
            <ChildProcessNodeId>00000000-0000-0000-0000-000000000000</ChildProcessNodeId>
          </TargetLoadBalancer>
          <InheritTarget>false</InheritTarget>
          <ContainingProcessId>922e928f-e50f-4d4b-88d8-8b71cc891f0e</ContainingProcessId>
          <TimeOutPeriod>
            <DisplayUnits>Seconds</DisplayUnits>
            <Period>
              <HardcodedValue>4</HardcodedValue>
            </Period>
          </TimeOutPeriod>
          <AHFDelay>
            <DisplayUnits>Seconds</DisplayUnits>
            <Period>
              <HardcodedValue>12</HardcodedValue>
            </Period>
          </AHFDelay>
          <ExpectList>
            <ExpectElementConfiguration>
              <Name>Error</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetErrorExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>ab1a503f-ff7b-4f5e-b6df-21ccac53016f</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Failed_Incompleted</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
            <ExpectElementConfiguration>
              <Name>Prompt</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetPromptExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>ab1a503f-ff7b-4f5e-b6df-21ccac53016f</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Succeeded</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
            <ExpectElementConfiguration>
              <Name>Admin Prompt</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetAdminPromptExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>ab1a503f-ff7b-4f5e-b6df-21ccac53016f</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Succeeded</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
            <ExpectElementConfiguration>
              <Name>Anything</Name>
              <RegularExpression>
                <HardcodedValue>.*</HardcodedValue>
              </RegularExpression>
              <OperationType>Succeeded</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
          </ExpectList>
          <CommandTimeoutPeriod>
            <DisplayUnits>Seconds</DisplayUnits>
            <Period>
              <HardcodedValue>2</HardcodedValue>
            </Period>
          </CommandTimeoutPeriod>
          <PreserveOutput>true</PreserveOutput>
          <Input>
            <FormattedCode># Add default iac virtual host
/usr/sbin/rabbitmqctl add_vhost {0}
# Add default user account: admin/cisco123
/usr/sbin/rabbitmqctl add_user {1} {2}
# Set user admin with administrator role
/usr/sbin/rabbitmqctl set_user_tags {3} administrator
# Assign admin user to iac virtual host 
/usr/sbin/rabbitmqctl set_permissions -p {4} {5} ".*" ".*" ".*"</FormattedCode>
            <References>
              <VariableReference xsi:type="PropertyReference">
                <DisplayPath>Process.Variables.Input.RabbitMQ Virtual Host</DisplayPath>
                <LinkChain />
                <ObjectId>db648782-89a8-415b-81f9-618e69b52810</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </VariableReference>
              <VariableReference xsi:type="PropertyReference">
                <DisplayPath>Process.Variables.Input.RabbitMQ IAC Admin Username</DisplayPath>
                <LinkChain />
                <ObjectId>e5fe9506-a35a-4b51-90e8-f9858adf8f4c</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </VariableReference>
              <VariableReference xsi:type="PropertyReference">
                <DisplayPath>Process.Variables.Input.RabbitMQ IAC Admin Password</DisplayPath>
                <LinkChain />
                <ObjectId>4461c3c7-83e7-4e38-86c7-0959e377e5c9</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </VariableReference>
              <VariableReference xsi:type="PropertyReference">
                <DisplayPath>Process.Variables.Input.RabbitMQ IAC Admin Username</DisplayPath>
                <LinkChain />
                <ObjectId>e5fe9506-a35a-4b51-90e8-f9858adf8f4c</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </VariableReference>
              <VariableReference xsi:type="PropertyReference">
                <DisplayPath>Process.Variables.Input.RabbitMQ Virtual Host</DisplayPath>
                <LinkChain />
                <ObjectId>db648782-89a8-415b-81f9-618e69b52810</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </VariableReference>
              <VariableReference xsi:type="PropertyReference">
                <DisplayPath>Process.Variables.Input.RabbitMQ IAC Admin Username</DisplayPath>
                <LinkChain />
                <ObjectId>e5fe9506-a35a-4b51-90e8-f9858adf8f4c</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </VariableReference>
            </References>
          </Input>
          <IsInputEncrypted>false</IsInputEncrypted>
          <SpecialEndCharacter>Empty</SpecialEndCharacter>
          <EndsWithSpecialCharacter>false</EndsWithSpecialCharacter>
          <SendMultiLineInputAsOne>false</SendMultiLineInputAsOne>
        </Configuration>
      </ActivityNode>
      <ActivityNode xsi:type="ExecuteActivityNode">
        <Id>8fc2b0d8-07ad-45cd-a213-4262cd7f278f</Id>
        <DisplayName>Close Terminal Session</DisplayName>
        <Children>
          <ActivityNode xsi:type="FailedBranchPlaceholderNode">
            <Id>34a01a99-104f-4f4c-a9f1-2e371fdd7497</Id>
            <ActivityNodeId>8fc2b0d8-07ad-45cd-a213-4262cd7f278f</ActivityNodeId>
            <CompletedId>4e2139f2-a0a1-43fd-b205-21f7ca2bf4cd</CompletedId>
          </ActivityNode>
        </Children>
        <Configuration xsi:type="SSHCloseSessionActivityConfiguration" xml:space="preserve">
          <Id>8fc2b0d8-07ad-45cd-a213-4262cd7f278f</Id>
          <DisplayName>Close Terminal Session</DisplayName>
          <TargetLoadBalancer xsi:type="ActivityTargetLoadBalancer">
            <ActivityId>a89dcd07-5741-4f9e-a40e-1a3afe0ec81e</ActivityId>
            <ChildProcessNodeId>00000000-0000-0000-0000-000000000000</ChildProcessNodeId>
          </TargetLoadBalancer>
          <InheritTarget>false</InheritTarget>
          <ContainingProcessId>922e928f-e50f-4d4b-88d8-8b71cc891f0e</ContainingProcessId>
          <TimeOutPeriod>
            <DisplayUnits>Minutes</DisplayUnits>
            <Period>
              <HardcodedValue>2</HardcodedValue>
            </Period>
          </TimeOutPeriod>
          <AHFDelay>
            <DisplayUnits>Seconds</DisplayUnits>
            <Period>
              <HardcodedValue>12</HardcodedValue>
            </Period>
          </AHFDelay>
          <ExpectList>
            <ExpectElementConfiguration>
              <Name>Error</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetErrorExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>8fc2b0d8-07ad-45cd-a213-4262cd7f278f</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Failed_Incompleted</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
            <ExpectElementConfiguration>
              <Name>Prompt</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetPromptExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>8fc2b0d8-07ad-45cd-a213-4262cd7f278f</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Succeeded</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
            <ExpectElementConfiguration>
              <Name>Admin Prompt</Name>
              <RegularExpression>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedTarget</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>GetAdminPromptExpect</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>8fc2b0d8-07ad-45cd-a213-4262cd7f278f</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </RegularExpression>
              <OperationType>Succeeded</OperationType>
              <OperationParameter xsi:type="SubstitutableString">
                <HardcodedValue />
              </OperationParameter>
              <MatchCase>false</MatchCase>
            </ExpectElementConfiguration>
          </ExpectList>
          <CommandTimeoutPeriod>
            <DisplayUnits>Minutes</DisplayUnits>
            <Period>
              <HardcodedValue>1</HardcodedValue>
            </Period>
          </CommandTimeoutPeriod>
          <PreserveOutput>true</PreserveOutput>
          <Input>
            <HardcodedValue />
          </Input>
        </Configuration>
      </ActivityNode>
    </Children>
  </FirstActivity>
  <ProcessId>922e928f-e50f-4d4b-88d8-8b71cc891f0e</ProcessId>
</WorkflowConfiguration>